// Applica questo patch al file ToolpathGenerator.tsx

// 1. Importa useCAMStore (se non è già importato)
import { useCAMStore } from '@/src/store/camStore';

// 2. Aggiungi l'importazione per l'integrazione dell'editor
import { integrateEditorInToolpathGenerator } from './integrateEditorInToolpathGenerator';

// 3. Accedi a setGcode dal camStore
const setStoreGcode = useCAMStore(state => state.setGcode);

// 4. Aggiungi stato per controllare la visibilità dell'editor
const [showEditor, setShowEditor] = useState<boolean>(true);

// 5. Modifica la funzione generateGCode per salvare il risultato nel camStore
// Trova la riga con onGCodeGenerated(gcode) e aggiungi:
setStoreGcode(gcode);
setShowEditor(true);

// 6. Aggiungi questo codice alla fine del return, prima della chiusura del tag </div> principale
{integrateEditorInToolpathGenerator({
  showEditor,
  setShowEditor,
  fileName: "toolpath.gcode"
})}
